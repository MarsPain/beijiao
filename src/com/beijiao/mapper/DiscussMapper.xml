<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.beijiao.dao.DiscussDao">
<!-- 查询讨论 -->
<select id="selectDiscuss" parameterType="int" resultMap="Discusslist">
     select * from discuss,reply where discussId=#{discussId}
</select>

<select id="selectListDiscuss" parameterType="int" resultMap="Discusslist">
     select * from discuss limit 7
</select>

<select id="selectAllDiscuss" parameterType="int" resultMap="Discusslist1">
     select * from discuss,reply where discuss.discussId=reply.discussId limit 5
</select>
<resultMap type="com.beijiao.model.Discuss" id="Discusslist">
        <id column="discussId" property="discussId"/>
        <result column="userId" property="userId"/>
        <result column="disContent" property="disContent"/>
        <result column="disTime" property="disTime"/>
</resultMap>
<!-- 添加讨论 -->
<insert id="insertDiscuss" parameterType="com.beijiao.model.Discuss">
       insert into discuss(userId,disContent,disTime) values(#{userId},#{disContent},#{disTime})
</insert>
<!-- 删除讨论 -->
<delete id="deleteDiscuss" parameterType="int">
       delete * from discuss where discussId=#{discussId}
</delete>
<resultMap type="com.beijiao.model.Discuss" id="Discusslist1">
        <id column="discussId" property="discussId"/>
        <result column="userId" property="userId"/>
        <result column="disContent" property="disContent"/>
        <result column="disTime" property="disTime"/>
        <association property="reply" javaType="com.beijiao.model.Reply">
            <id property="replyId" column="replyId"/>             
            <result property="discussId" column="discussId"/>  
            <result property="userId" column="userId"/>  
            <result property="replyContent" column="replyContent"/>   
            <result property="replyTime" column="replyTime"/>       
        </association>
</resultMap>


</mapper>